{
    "name": "IDL",
    "scopeName": "source.idl",
    "fileTypes": [ "pro" ],
    "patterns": [
        {
            "comment": "Comments!",
            "begin": "(^[ \\t]+)?(?=;)",
            "beginCaptures": {
                    "1": {"name": "punctuation.whitespace.comment.leading.idl"}
                },
            "end": "(?!\\G)",
            "patterns": [
                {
                    "begin": ";",
                    "beginCaptures": {
                            "0": {"name": "punctuation.definition.comment.idl"}
                        },
                    "end": "\\n",
                    "name": "comment.line.semicolon.idl"
                }
            ]
        },
        {
            "comment": "What the heck does the 'of' reserved word do?",
            "match": "\\b(?<!/)(?i:begin|break|case|common|compile_opt|continue|do|else|endcase|endelse|endfor|endif|endrep|endswitch|endwhile|end|forward_function|for|function|goto|if|inherits|of|pro|repeat|switch|then|until|while)",
            "name": "keyword.control.idl"
        },
        {
            "comment": "These are the 'text' operators in IDL.",
            "match": "\\b(?i:and|eq|ge|gt|le|lt|mod|ne|not|or|xor)=?\\b",
            "name": "keyword.operator.idl"
        },
        {
            "comment": "Logical operators",
            "match": "(?:~|&&|\\|\\|)",
            "name": "keyword.operator.idl"
        },
        {
            "comment": "The system variables.  Some are read-only, some are not & they can be created on the fly.",
            "match": "![a-zA-Z][a-zA-Z0-9_.]+\\b",
            "name": "constant.language.idl"
        },
        {
            "comment": "Valid numbers 1[bB], 1(sS|), 1[uU], 1[lL], 1[uU][lL], 1[lL][lL], 1[uU][lL][lL], .1, 1.1, .1e1, 1.1e1, 1e1, .1[dD], 1.1[dD], .1[dD]1, 1.1[dD]1",
            "match": "(?<=[\\s\\-\\+\\*\\/\\\\=:\\[\\(\\{,]|^)(\\d|\\.)\\d*(\\.\\d*)?(?i:b|s|ul?l?|ll?|e|d|)(?:[+-]?\\d+)?",
            "name": "constant.numeric.idl"
        },
        {
            "comment": "IDL strings are very similar to Python strings; single & double quotes are equivalent.",
            "match": "'[^']*'",
            "name": "string.quoted.single.idl"
        },
        {
            "comment": "IDL strings are very similar to Python strings; single & double quotes are equivalent.",
            "match": "\"[^\"]*\"",
            "name": "string.quoted.double.idl"
        },
        {
            "include": "#functions"
        },
        {
            "include": "#procedures"
        }
    ],
    "repository": {
        "functions": {
            "patterns": [
                {
                    "include": "#functions-a"
                },
                {
                    "include": "#functions-b"
                },
                {
                    "include": "#functions-j"
                },
                {
                    "include": "#functions-k"
                },
                {
                    "include": "#functions-m"
                },
                {
                    "include": "#functions-n"
                },
                {
                    "include": "#functions-o"
                },
                {
                    "include": "#functions-p"
                },
                {
                    "include": "#functions-q"
                },
                {
                    "include": "#functions-r"
                },
                {
                    "include": "#functions-s"
                },
                {
                    "include": "#functions-t"
                },
                {
                    "include": "#functions-u"
                },
                {
                    "include": "#functions-v"
                },
                {
                    "include": "#functions-w"
                },
                {
                    "include": "#functions-x"
                }
            ]
        },
        "procedures": {
            "patterns": [
                {
                    "include": "#procedures-a"
                },
                {
                    "include": "#procedures-b"
                },
                {
                    "include": "#procedures-j"
                },
                {
                    "include": "#procedures-k"
                },
                {
                    "include": "#procedures-m"
                },
                {
                    "include": "#procedures-n"
                },
                {
                    "include": "#procedures-o"
                },
                {
                    "include": "#procedures-p"
                },
                {
                    "include": "#procedures-q"
                },
                {
                    "include": "#procedures-r"
                },
                {
                    "include": "#procedures-s"
                },
                {
                    "include": "#procedures-t"
                },
                {
                    "include": "#procedures-u"
                },
                {
                    "include": "#procedures-v"
                },
                {
                    "include": "#procedures-w"
                },
                {
                    "include": "#procedures-x"
                },
                {
                    "include": "#procedures-z"
                }
            ]
        },
        "functions-a": {
            "comment": "IDL built-in functions that begin with A.",
            "match": "(?i:a_correlate|abs|acos|adapt_hist_equal|alog10|alog|amoeba|app_user_dir_query|app_user_dir|arg_present|array_equal|array_indices|ascii_template|asin|assoc|atan)(?=\\()",
            "name": "support.function.idl"
        },
        "functions-b": {
            "comment": "IDL built-in functions that begin with B.",
            "match": "(?i:beseli|beselj|beselk|besely|beta|bilinear|bin_date|binary_template|bindgen|binomial|bit_ffs|bit_population|blk_con|broyden|butterworth|bytarr|byte|bytscl)(?=\\()",
            "name": "support.function.idl"
        },
        "functions-j": {
            "comment": "IDL built-in functions that begin with J.",
            "match": "(?i:julday)(?=\\()",
            "name": "support.function.idl"
        },
        "functions-k": {
            "comment": "IDL built-in functions that begin with K.",
            "match": "(?i:keyword_set|krig2d|kurtosis|kw_test)(?=\\()",
            "name": "support.function.idl"
        },
        "functions-m": {
            "patterns": [
                {
                    "include": "#functions-mmm"
                },
                {
                    "include": "#functions-map"
                },
                {
                    "include": "#functions-mesh"
                },
                {
                    "include": "#functions-morph"
                }
            ]
        },
        "functions-mmm": {
            "comment": "IDL built-in functions that begin with M.",
            "match": "(?i:m_correlate|machar|make_array|matrix_multiply|matrix_power|max|md_test|meanabsdev|mean|median|memory|min|min_curve_surf|moment|mpeg_open)(?=\\()",
            "name": "support.function.idl"
        },
        "functions-map": {
            "comment": "IDL built-in functions that begin with MAP.",
            "match": "(?i:map_(?i:2points|image|patch|proj_forward|proj_image|proj_init|proj_inverse))(?=\\()",
            "name": "support.function.idl"
        },
        "functions-mesh": {
            "comment": "IDL built-in functions that begin with MESH.",
            "match": "(?i:mesh_(?i:clip|decimate|issolid|merge|numtriangles|smooth|surfacearea|validate|volume))(?=\\()",
            "name": "support.function.idl"
        },
        "functions-morph": {
            "comment": "IDL built-in functions that begin with MORPH.",
            "match": "(?i:morph_(?i:close|distance|gradient|hitormiss|open|thin|tophat))(?=\\()",
            "name": "support.function.idl"
        },
        "functions-n": {
            "patterns": [
                {
                    "include": "#functions-nnn"
                },
                {
                    "include": "#functions-ncdf"
                }
            ]
        },
        "functions-nnn": {
            "comment": "IDL built-in functions that begin with N.",
            "match": "(?i:n_elements|n_params|n_tags|newton|noise_hurl|noise_pick|noise_scatter|noise_slur|norm)(?=\\()",
            "name": "support.function.idl"
        },
        "functions-ncdf": {
            "comment": "IDL built-in functions that begin with NCDF.",
            "match": "(?i:ncdf_(?i:attcopy|attinq|attname|create|dimdef|dimid|exists|inquire|open|vardef|varid))(?=\\()",
            "name": "support.function.idl"
        },
        "functions-o": {
            "patterns": [
                {
                    "include": "#functions-ooo"
                },
                {
                    "include": "#functions-obj"
                }
            ]
        },
        "functions-ooo": {
            "comment": "IDL built-in functions that begin with O.",
            "match": "(?i:objarr)(?=\\()",
            "name": "support.function.idl"
        },
        "functions-obj": {
            "comment": "IDL built-in functions that begin with OBJ.",
            "match": "(?i:obj_(?i:class|hasmethod|isa|new|valid))(?=\\()",
            "name": "support.function.idl"
        },
        "functions-p": {
            "comment": "IDL built-in functions that begin with P.",
            "match": "(?i:p_correlate|parse_url|path_sep|pcomp|pnt_line|polar_surface|poly_2d|poly_area|poly_fit|polyfillv|polyshade|poly|pref_get|prewitt|primes|product|profile|project_vol|ptr_new|ptr_valid|ptrarr)(?=\\()",
            "name": "support.function.idl"
        },
        "functions-q": {
            "patterns": [
                {
                    "include": "#functions-qqq"
                },
                {
                    "include": "#functions-query"
                }
            ]
        },
        "functions-qqq": {
            "comment": "IDL built-in functions that begin with Q.",
            "match": "(?i:qgrid3|qromb|qromo|qsimp)(?=\\()",
            "name": "support.function.idl"
        },
        "functions-query": {
            "comment": "IDL built-in functions that begin with QUERY.",
            "match": "(?i:query_(?i:ascii|bmp|dicom|gif|image|jpeg2000|jpeg|mrsid|pict|png|ppm|srf|tiff|wav))(?=\\()",
            "name": "support.function.idl"
        },
        "functions-r": {
            "patterns": [
                {
                    "include": "#functions-rrr"
                },
                {
                    "include": "#functions-read"
                }
            ]
        },
        "functions-rrr": {
            "comment": "IDL built-in functions that begin with R.",
            "match": "(?i:r_correlate|r_test|radon|randomn|randomu|ranks|real_part|rebin|recall_commands|recon3|reform|region_grow|regress|replicate|reverse|rk4|roberts|rotate|rot|round|routine_info|routine_filepath|rs_test)(?=\\()",
            "name": "support.function.idl"
        },
        "functions-read": {
            "comment": "IDL built-in functions that begin with READ.",
            "match": "(?i:read_(?i:ascii|binary|dicom|image|jpeg2000|mrsid|png|spr|sylk|tiff|wav|xwd))(?=\\()",
            "name": "support.function.idl"
        },
        "functions-s": {
            "comment": "IDL built-in functions that begin with S.",
            "match": "(?i:s_test|savgol|scope_level|scope_traceback|scope_varfetch|scope_varname|search2d|search3d|sem_create|sem_lock|sfit|shift_diff|shift|shmdebug|shmvar|simplex|sindgen|sinh|sin|size|skewness|smooth|sobel|sort|sph_scat|spher_harm|spl_init|spl_interp|spline|sprsab|sprsax|sprsin|sprstp|sqrt|standardize|stddev|strarr|strcmp|strcompress|stregex|string|strjoin|strlen|strlowcase|strmatch|strmessage|strmid|strpos|strsplit|strtrim|strupcase|svdfit|svsol|swap_endian|systime)(?=\\()",
            "name": "support.function.idl"
        },
        "functions-t": {
            "comment": "IDL built-in functions that begin with T.",
            "match": "(?i:t_cvf|t_pdf|tag_names|tanh|tan|temporary|tetra_clip|tetra_surface|tetra_volume|thin|timegen|tm_test|total|trace|transpose|tri_surf|trigrid|trisol|ts_coef|ts_diff|ts_fcast|ts_smooth|tvrd)(?=\\()",
            "name": "support.function.idl"
        },
        "functions-u": {
            "comment": "IDL built-in functions that begin with U.",
            "match": "(?i:uindgen|uintarr|uint|ul64indgen|ulindgen|ulon64arr|ulonarr|ulong64|ulong|uniq|unsharp_mask)(?=\\()",
            "name": "support.function.idl"
        },
        "functions-v": {
            "comment": "IDL built-in functions that begin with V.",
            "match": "(?i:value_locate|variance|vert_t3d|voigt|voxel_proj)(?=\\()",
            "name": "support.function.idl"
        },
        "functions-w": {
            "comment": "IDL built-in functions that begin with W. Wavelet routines are not included yet.",
            "match": "(?i:warp_tri|watershed|where|wtn)(?=\\()",
            "name": "support.function.idl"
        },
        "functions-x": {
            "comment": "IDL built-in functions that begin with X.",
            "match": "(?i:xfont|xregistered|xsq_test)(?=\\()",
            "name": "support.function.idl"
        },
        "procedures-a": {
            "comment": "IDL built-in procedures that begin with A.",
            "match": "(?i:annotate|arrow|axis)(?=,|\\s)",
            "name": "support.function.idl"
        },
        "procedures-b": {
            "comment": "IDL built-in procedures that begin with B.",
            "match": "(?i:bar_plot|blas_axpy|box_cursor|breakpoint|byteorder)(?=,|\\s)",
            "name": "support.function.idl"
        },
        "procedures-j": {
            "comment": "IDL built-in procedures that begin with J.",
            "match": "(?i:journal)(?=,|\\s)",
            "name": "support.function.idl"
        },
        "procedures-m": {
            "patterns": [
                {
                    "include": "#procedures-mmm"
                },
                {
                    "include": "#procedures-map"
                },
                {
                    "include": "#procedures-mpeg"
                }
            ]
        },
        "procedures-mmm": {
            "comment": "IDL built-in procedures that begin with M.",
            "match": "(?i:make_dll|make_rt|mesh_obj|message|mk_html_help|modifyct|multi)(?=,|\\s)",
            "name": "support.function.idl"
        },
        "procedures-map": {
            "comment": "IDL built-in procedures that begin with MAP.",
            "match": "(?i:map_(?i:continents|grid|proj_info|set))(?=,|\\s)",
            "name": "support.function.idl"
        },
        "procedures-mpeg": {
            "comment": "IDL built-in procedures that begin with MPEG.",
            "match": "(?i:mpeg_(?i:close|put|save))(?=,|\\s)",
            "name": "support.function.idl"
        },
        "procedures-n": {
            "comment": "IDL built-in procedures that begin with N.",
            "match": "(?i:ncdf_(?i:attdel|attget|attput|attrename|close|control|diminq|dimrename|varget1|varget|varput|varrename))(?=,|\\s)",
            "name": "support.function.idl"
        },
        "procedures-o": {
            "comment": "IDL built-in procedures that begin with O.",
            "match": "(?i:obj_destroy|on_error|on_ioerror|online_help|openr|openu|openw|oploterr|oplot)(?=,|\\s)",
            "name": "support.function.idl"
        },
        "procedures-p": {
            "comment": "IDL built-in procedures that begin with P.",
            "match": "(?i:particle_trace|path_cache|plot_3dbox|plot_field|ploterr|plots|plot|point_lun|polar_contour|polyfill|polywarp|popd|powell|pref_commit|pref_migrate|pref_set|printd|printf|print|profiler|profiles|ps_show_fonts|psafm|pseudo|ptr_free|pushd)(?=,|\\s)",
            "name": "support.function.idl"
        },
        "procedures-q": {
            "comment": "IDL built-in procedures that begin with Q.",
            "match": "(?i:qhull|qwerty)(?=,|\\s)",
            "name": "support.function.idl"
        },
        "procedures-r": {
            "patterns": [
                {
                    "include": "#procedures-rrr"
                },
                {
                    "include": "#procedures-read"
                }
            ]
        },
        "procedures-rrr": {
            "comment": "IDL built-in procedures that begin with R.",
            "match": "(?i:rdpix|readf|reads|readu|read|return|reduce_colors|register_cursor|replicate_inplace|resolve_all|resolve_routine|restore|retall|return)(?=,|\\s)",
            "name": "support.function.idl"
        },
        "procedures-read": {
            "comment": "IDL built-in procedures that begin with READ.",
            "match": "(?i:read_(?:gif|interfile|jpeg|pict|png|ppm|srf|wave|x11_bitmap))(?=,|\\s)",
            "name": "support.function.idl"
        },
        "procedures-s": {
            "comment": "IDL built-in procedures that begin with S.",
            "match": "(?i:save|scale3d|scale3|sem_delete|sem_release|set_plot|set_shading|setenv|shade_surf_irr|shade_surf|shade_volume|shmmap|shmunmap|show3|showfont|skip_lun|slicer3|slide_image|socket|spawn|sph_4pnt|spline_p|stop|streamline|stretch|strput|struct_assign|struct_hide|surface|surfr|svdc|swap_endian_inplace)(?=,|\\s)",
            "name": "support.function.idl"
        },
        "procedures-t": {
            "comment": "IDL built-in procedures that begin with T.",
            "match": "(?i:t3d|tek_color|threed|time_test2|triangulate|triql|trired|truncate_lun|tvcrs|tvlct|tvscl|tv)(?=,|\\s)",
            "name": "support.function.idl"
        },
        "procedures-u": {
            "comment": "IDL built-in procedures that begin with U.",
            "match": "(?i:usersym)(?=,|\\s)",
            "name": "support.function.idl"
        },
        "procedures-v": {
            "comment": "IDL built-in procedures that begin with V.",
            "match": "(?i:vector_field|velovect|vel|voronoi)(?=,|\\s)",
            "name": "support.function.idl"
        },
        "procedures-w": {
            "comment": "IDL built-in procedures that begin with W.",
            "match": "(?i:wait|wdelete|wf_draw|window|writeu|wset|wshow)(?=,|\\s)",
            "name": "support.function.idl"
        },
        "procedures-x": {
            "comment": "IDL built-in procedures that begin with X.",
            "match": "(?i:xbm_edit|xdisplayfile|xdxf|xinteranimate|xloadct|xmanager|xmng_tmpl|xmtool|xobjview_rotate|xobjview_write_image|xobjview|xpalette|xpcolor|xplot3d|xroi|xsurface|xvaredit|xvolume_rotate|xvolume_write_image|xvolume|xyouts)(?=,|\\s)",
            "name": "support.function.idl"
        },
        "procedures-z": {
            "comment": "IDL built-in procedures that begin with Z.",
            "match": "(?i:zoom_24|zoom)(?=,|\\s)",
            "name": "support.function.idl"
        }
    }
}
